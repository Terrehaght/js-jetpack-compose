<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ispani - Work Marketplace</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --ispani-gold: #C9A227;
      --ispani-gold-light: #E8D59A;
      --ispani-gold-dark: #8A7924;
      --ispani-cream: #FDF8EC;
      --ispani-cream-dark: #F5EDDA;
      --ispani-text: #3D3D3D;
      --ispani-text-light: #6B6B6B;
      --ispani-teal: #2BA8A8;
      --ispani-card-bg: #FFFEF9;
      --ispani-shadow: rgba(201, 162, 39, 0.15);

      /* Override Material Design variables */
      --md-primary: var(--ispani-gold);
      --md-primary-hover: var(--ispani-gold-dark);
      --md-primary-container: var(--ispani-gold-light);
      --md-on-primary: #FFFFFF;
      --md-on-primary-container: var(--ispani-gold-dark);
      --md-surface: var(--ispani-card-bg);
      --md-surface-variant: var(--ispani-cream-dark);
      --md-surface-container-low: var(--ispani-cream);
      --md-surface-container-highest: var(--ispani-cream-dark);
      --md-on-surface: var(--ispani-text);
      --md-on-surface-variant: var(--ispani-text-light);
      --md-outline: var(--ispani-gold-light);
      --md-outline-variant: #E5DFC7;
      --md-ripple: rgba(201, 162, 39, 0.12);
    }

    .dark {
      --ispani-cream: #1A1814;
      --ispani-cream-dark: #252118;
      --ispani-card-bg: #1E1B16;
      --ispani-text: #F5F0E1;
      --ispani-text-light: #B8B0A0;
      --ispani-shadow: rgba(0, 0, 0, 0.4);

      --md-surface: var(--ispani-card-bg);
      --md-surface-variant: var(--ispani-cream-dark);
      --md-surface-container-low: var(--ispani-cream);
      --md-surface-container-highest: var(--ispani-cream-dark);
      --md-on-surface: var(--ispani-text);
      --md-on-surface-variant: var(--ispani-text-light);
      --md-outline: #4A432E;
      --md-outline-variant: #3A3428;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
      overflow: hidden;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--ispani-cream);
      color: var(--ispani-text);
    }

    #app {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Custom Tab Styles for Ispani */
    .ispani-tabs {
      display: flex;
      background: var(--ispani-cream-dark);
      border-radius: 30px;
      padding: 4px;
      width: fit-content;
      margin: 0 auto;
    }

    .ispani-tab {
      padding: 12px 32px;
      border: none;
      background: transparent;
      font-family: 'Poppins', sans-serif;
      font-size: 15px;
      font-weight: 500;
      color: var(--ispani-text-light);
      cursor: pointer;
      border-radius: 26px;
      transition: all 0.3s ease;
      position: relative;
    }

    .ispani-tab.active {
      background: var(--ispani-card-bg);
      color: var(--ispani-gold);
      border: 1.5px solid var(--ispani-gold);
      box-shadow: 0 2px 8px var(--ispani-shadow);
    }

    .ispani-tab:hover:not(.active) {
      color: var(--ispani-gold-dark);
    }

    /* Logo Animation */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    .logo-container {
      animation: float 4s ease-in-out infinite;
    }

    /* Input overrides */
    .material-input-wrapper {
      border-radius: 12px !important;
      border-color: var(--ispani-gold-light) !important;
      background: var(--ispani-card-bg) !important;
    }

    .material-input-wrapper.material-input-focused {
      border-color: var(--ispani-gold) !important;
      box-shadow: 0 0 0 3px var(--ispani-shadow) !important;
    }

    .material-input-label {
      background: var(--ispani-card-bg) !important;
    }

    .material-input-floated .material-input-label,
    .material-input-field:focus ~ .material-input-label {
      color: var(--ispani-gold) !important;
    }

    /* Select Dropdown */
    .ispani-select-wrapper {
      position: relative;
      width: 100%;
    }

    .ispani-select {
      width: 100%;
      padding: 16px 48px 16px 14px;
      border: 2px solid var(--ispani-gold-light);
      border-radius: 12px;
      background: var(--ispani-card-bg);
      font-size: 16px;
      font-family: 'Poppins', sans-serif;
      color: var(--ispani-text);
      cursor: pointer;
      appearance: none;
      outline: none;
      transition: all 0.2s ease;
    }

    .ispani-select:focus {
      border-color: var(--ispani-gold);
      box-shadow: 0 0 0 3px var(--ispani-shadow);
    }

    .ispani-select-label {
      position: absolute;
      left: 10px;
      top: 0;
      transform: translateY(-50%);
      font-size: 12px;
      color: var(--ispani-gold);
      background: var(--ispani-card-bg);
      padding: 0 6px;
    }

    .ispani-select-icon {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--ispani-text-light);
      pointer-events: none;
    }

    /* Button overrides */
    .material-btn.ispani-btn {
      background: var(--ispani-gold) !important;
      color: white !important;
      border-radius: 28px !important;
      padding: 16px 36px !important;
      font-size: 15px !important;
      font-weight: 600 !important;
      letter-spacing: 0.5px !important;
      box-shadow: 0 4px 15px var(--ispani-shadow) !important;
      transition: all 0.3s ease !important;
    }

    .material-btn.ispani-btn:hover {
      background: var(--ispani-gold-dark) !important;
      box-shadow: 0 6px 20px rgba(201, 162, 39, 0.3) !important;
      transform: translateY(-2px);
    }

    /* Card */
    .ispani-card {
      background: var(--ispani-card-bg);
      border-radius: 32px 32px 0 0;
      box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }

    /* Trust badges */
    .trust-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--ispani-text-light);
      font-size: 13px;
    }

    .trust-badge i {
      color: var(--ispani-gold);
    }

    /* Page transitions */
    .page-content {
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 0.4s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Link styles */
    .ispani-link {
      color: var(--ispani-gold);
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .ispani-link:hover {
      color: var(--ispani-gold-dark);
      text-decoration: underline;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 4px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--ispani-gold-light);
      border-radius: 4px;
    }

    /* Form label */
    .form-label {
      font-size: 14px;
      color: var(--ispani-text-light);
      margin-bottom: 8px;
      display: block;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script src="layouts.js"></script>
  <script src="material-views.js"></script>
  <script src="material-notifiers.js"></script>
  <script src="tabs.js"></script>
  <script src="bottom_nav.js"></script>

  <script>
    // Dark mode detection
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });

    // Get components
    const { Column, Row, ScrollView, mount } = AndroidLayouts;
    const { TextView, MaterialButton, MaterialInput, Card, Icon, Divider } = AndroidComponents;
    const { MaterialDialog, Snackbar } = AndroidComponents;

    // State
    let currentTab = 'login';
    let formContainer = null;

    // Create Logo Section
    function createLogoSection() {
      const logoContainer = document.createElement('div');
      logoContainer.className = 'logo-container';
      logoContainer.style.cssText = 'display: flex; flex-direction: column; align-items: center; padding: 40px 20px 30px;';

      // Logo circle with icon
      const logoCircle = document.createElement('div');
      logoCircle.style.cssText = `
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: linear-gradient(145deg, var(--ispani-gold), var(--ispani-gold-dark));
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px var(--ispani-shadow);
        margin-bottom: 20px;
      `;

      const logoIcon = document.createElement('i');
      logoIcon.className = 'bx bxs-bank';
      logoIcon.style.cssText = 'font-size: 48px; color: var(--ispani-teal);';
      logoCircle.appendChild(logoIcon);
      logoContainer.appendChild(logoCircle);

      // Brand name
      const brandName = document.createElement('h1');
      brandName.textContent = 'Ispani';
      brandName.style.cssText = `
        font-family: 'Playfair Display', serif;
        font-size: 48px;
        font-weight: 700;
        color: var(--ispani-gold);
        margin-bottom: 8px;
        letter-spacing: 2px;
      `;
      logoContainer.appendChild(brandName);

      // Tagline
      const tagline = document.createElement('p');
      tagline.textContent = 'Work Marketplace';
      tagline.style.cssText = `
        font-size: 18px;
        color: var(--ispani-text-light);
        font-weight: 500;
        margin-bottom: 12px;
      `;
      logoContainer.appendChild(tagline);

      // Decorative line
      const line = document.createElement('div');
      line.style.cssText = `
        width: 60px;
        height: 4px;
        background: var(--ispani-gold);
        border-radius: 2px;
        margin-bottom: 16px;
      `;
      logoContainer.appendChild(line);

      // Description
      const description = document.createElement('p');
      description.textContent = 'Connecting everyone with verified opportunities';
      description.style.cssText = `
        font-size: 14px;
        color: var(--ispani-text-light);
        text-align: center;
        max-width: 280px;
      `;
      logoContainer.appendChild(description);

      return { getElement: () => logoContainer };
    }

    // Create Tab Buttons
    function createTabs() {
      const tabContainer = document.createElement('div');
      tabContainer.className = 'ispani-tabs';
      tabContainer.style.marginBottom = '24px';

      const loginTab = document.createElement('button');
      loginTab.className = 'ispani-tab active';
      loginTab.textContent = 'Login';
      loginTab.id = 'loginTab';

      const signupTab = document.createElement('button');
      signupTab.className = 'ispani-tab';
      signupTab.textContent = 'Sign Up';
      signupTab.id = 'signupTab';

      loginTab.addEventListener('click', () => {
        if (currentTab !== 'login') {
          currentTab = 'login';
          loginTab.classList.add('active');
          signupTab.classList.remove('active');
          renderForm();
        }
      });

      signupTab.addEventListener('click', () => {
        if (currentTab !== 'signup') {
          currentTab = 'signup';
          signupTab.classList.add('active');
          loginTab.classList.remove('active');
          renderForm();
        }
      });

      tabContainer.appendChild(loginTab);
      tabContainer.appendChild(signupTab);

      return { getElement: () => tabContainer };
    }

    // Create Select Dropdown
    function createSelect(labelText, options, placeholder) {
      const wrapper = document.createElement('div');
      wrapper.className = 'ispani-select-wrapper';
      wrapper.style.marginBottom = '20px';

      const label = document.createElement('span');
      label.className = 'ispani-select-label';
      label.textContent = labelText;

      const select = document.createElement('select');
      select.className = 'ispani-select';

      const defaultOption = document.createElement('option');
      defaultOption.value = '';
      defaultOption.textContent = placeholder;
      defaultOption.disabled = true;
      defaultOption.selected = true;
      select.appendChild(defaultOption);

      options.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        select.appendChild(option);
      });

      const icon = document.createElement('i');
      icon.className = 'bx bx-chevron-down ispani-select-icon';
      icon.style.fontSize = '22px';

      wrapper.appendChild(label);
      wrapper.appendChild(select);
      wrapper.appendChild(icon);

      return { getElement: () => wrapper, getValue: () => select.value };
    }

    // Create Login Form
    function createLoginForm() {
      const container = document.createElement('div');
      container.className = 'page-content';
      container.style.cssText = 'display: flex; flex-direction: column; gap: 16px;';

      // Form label helper
      function addLabel(text) {
        const label = document.createElement('label');
        label.className = 'form-label';
        label.textContent = text;
        return label;
      }

      // Phone Input
      container.appendChild(addLabel('Phone Number'));
      const phoneInput = MaterialInput({
        label: 'Phone Number',
        type: 'tel',
        placeholder: '+1234567890',
        leadingIcon: 'bx bx-phone',
        inputMode: 'tel'
      });
      container.appendChild(phoneInput.getElement());

      // Password Input
      const passLabel = addLabel('Password');
      passLabel.style.marginTop = '8px';
      container.appendChild(passLabel);
      const passwordInput = MaterialInput({
        label: 'Password',
        type: 'password',
        placeholder: 'Enter your password',
        leadingIcon: 'bx bx-lock-alt'
      });
      container.appendChild(passwordInput.getElement());

      // Submit Button
      const buttonWrapper = document.createElement('div');
      buttonWrapper.style.marginTop = '16px';
      const submitBtn = MaterialButton({
        text: 'Sign In Securely',
        variant: 'filled',
        leadingIcon: 'bx bx-log-in',
        className: 'ispani-btn',
        onClick: () => handleLogin(phoneInput.getValue(), passwordInput.getValue())
      });
      buttonWrapper.appendChild(submitBtn.getElement());
      container.appendChild(buttonWrapper);

      // Create Account Link
      const linkWrapper = document.createElement('p');
      linkWrapper.style.cssText = 'text-align: center; margin-top: 16px; color: var(--ispani-text-light); font-size: 14px;';
      linkWrapper.innerHTML = 'New to the platform? <span class="ispani-link" id="createAccountLink">Create Account</span>';
      container.appendChild(linkWrapper);

      setTimeout(() => {
        const createLink = document.getElementById('createAccountLink');
        if (createLink) {
          createLink.addEventListener('click', () => {
            currentTab = 'signup';
            document.getElementById('signupTab').click();
          });
        }
      }, 0);

      return container;
    }

    // Create Signup Form
    function createSignupForm() {
      const container = document.createElement('div');
      container.className = 'page-content';
      container.style.cssText = 'display: flex; flex-direction: column; gap: 16px;';

      function addLabel(text) {
        const label = document.createElement('label');
        label.className = 'form-label';
        label.textContent = text;
        return label;
      }

      // First Name
      container.appendChild(addLabel('First Name'));
      const firstNameInput = MaterialInput({
        label: 'First Name',
        placeholder: 'John',
        leadingIcon: 'bx bx-user'
      });
      container.appendChild(firstNameInput.getElement());

      // Surname
      const surnameLabel = addLabel('Surname');
      surnameLabel.style.marginTop = '8px';
      container.appendChild(surnameLabel);
      const surnameInput = MaterialInput({
        label: 'Surname',
        placeholder: 'Doe',
        leadingIcon: 'bx bx-user'
      });
      container.appendChild(surnameInput.getElement());

      // Gender Select
      const genderLabel = addLabel('Gender');
      genderLabel.style.marginTop = '8px';
      container.appendChild(genderLabel);
      const genderSelect = createSelect('Gender', [
        { value: 'male', label: 'Male' },
        { value: 'female', label: 'Female' },
        { value: 'other', label: 'Other' },
        { value: 'prefer_not', label: 'Prefer not to say' }
      ], 'Select gender');
      container.appendChild(genderSelect.getElement());

      // Phone
      container.appendChild(addLabel('Phone Number'));
      const phoneInput = MaterialInput({
        label: 'Phone Number',
        type: 'tel',
        placeholder: '+1234567890',
        leadingIcon: 'bx bx-phone',
        inputMode: 'tel'
      });
      container.appendChild(phoneInput.getElement());

      // Password
      const passLabel = addLabel('Password');
      passLabel.style.marginTop = '8px';
      container.appendChild(passLabel);
      const passwordInput = MaterialInput({
        label: 'Password',
        type: 'password',
        placeholder: 'Create a password',
        leadingIcon: 'bx bx-lock-alt'
      });
      container.appendChild(passwordInput.getElement());

      // Confirm Password
      const confirmLabel = addLabel('Confirm Password');
      confirmLabel.style.marginTop = '8px';
      container.appendChild(confirmLabel);
      const confirmPasswordInput = MaterialInput({
        label: 'Confirm Password',
        type: 'password',
        placeholder: 'Re-enter password',
        leadingIcon: 'bx bx-lock'
      });
      container.appendChild(confirmPasswordInput.getElement());

      // Submit Button
      const buttonWrapper = document.createElement('div');
      buttonWrapper.style.marginTop = '16px';
      const submitBtn = MaterialButton({
        text: 'Create Account',
        variant: 'filled',
        leadingIcon: 'bx bx-user-plus',
        className: 'ispani-btn',
        onClick: () => handleSignup({
          firstName: firstNameInput.getValue(),
          surname: surnameInput.getValue(),
          gender: genderSelect.getValue(),
          phone: phoneInput.getValue(),
          password: passwordInput.getValue(),
          confirmPassword: confirmPasswordInput.getValue()
        })
      });
      buttonWrapper.appendChild(submitBtn.getElement());
      container.appendChild(buttonWrapper);

      // Login Link
      const linkWrapper = document.createElement('p');
      linkWrapper.style.cssText = 'text-align: center; margin-top: 16px; color: var(--ispani-text-light); font-size: 14px;';
      linkWrapper.innerHTML = 'Already have an account? <span class="ispani-link" id="loginLink">Sign In</span>';
      container.appendChild(linkWrapper);

      setTimeout(() => {
        const loginLink = document.getElementById('loginLink');
        if (loginLink) {
          loginLink.addEventListener('click', () => {
            currentTab = 'login';
            document.getElementById('loginTab').click();
          });
        }
      }, 0);

      return container;
    }

    // Create Trust Footer
    function createTrustFooter() {
      const footer = document.createElement('div');
      footer.style.cssText = `
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        padding: 20px;
        margin-top: auto;
      `;

      const shield = document.createElement('i');
      shield.className = 'bx bxs-shield';
      shield.style.cssText = 'font-size: 18px; color: var(--ispani-gold);';
      footer.appendChild(shield);

      const badges = ['Secure', 'Transparent', 'Approved'];
      badges.forEach((text, index) => {
        const span = document.createElement('span');
        span.className = 'trust-badge';
        span.textContent = text;
        footer.appendChild(span);

        if (index < badges.length - 1) {
          const dot = document.createElement('span');
          dot.style.cssText = 'color: var(--ispani-text-light); font-size: 8px;';
          dot.textContent = 'â€¢';
          footer.appendChild(dot);
        }
      });

      return { getElement: () => footer };
    }

    // Render Form
    function renderForm() {
      if (!formContainer) return;

      formContainer.innerHTML = '';

      if (currentTab === 'login') {
        formContainer.appendChild(createLoginForm());
      } else {
        formContainer.appendChild(createSignupForm());
      }
    }

    // Handle Login
    function handleLogin(phone, password) {
      if (!phone || !password) {
        Snackbar.error('Please fill in all fields');
        return;
      }
      Snackbar.success('Login successful! Welcome back.');
    }

    // Handle Signup
    function handleSignup(data) {
      if (!data.firstName || !data.surname || !data.phone || !data.password) {
        Snackbar.error('Please fill in all required fields');
        return;
      }
      if (data.password !== data.confirmPassword) {
        Snackbar.error('Passwords do not match');
        return;
      }
      if (data.password.length < 6) {
        Snackbar.error('Password must be at least 6 characters');
        return;
      }
      Snackbar.success('Account created successfully! Welcome to Ispani.');
    }

    // Build App
    function buildApp() {
      const app = document.getElementById('app');

      // Main container
      const mainContainer = Column(
        { width: 'match_parent', height: 'match_parent', background: 'var(--ispani-cream)' },
        [
          // Logo section
          createLogoSection(),

          // Card section
          (() => {
            const card = document.createElement('div');
            card.className = 'ispani-card';
            card.style.cssText = `
              flex: 1;
              display: flex;
              flex-direction: column;
              overflow: hidden;
            `;

            // Card header with title and tabs
            const header = document.createElement('div');
            header.style.cssText = 'padding: 32px 24px 0;';

            const title = document.createElement('h2');
            title.textContent = 'Welcome Back';
            title.style.cssText = `
              font-family: 'Playfair Display', serif;
              font-size: 28px;
              font-weight: 600;
              color: var(--ispani-text);
              margin-bottom: 24px;
            `;
            header.appendChild(title);
            header.appendChild(createTabs().getElement());

            card.appendChild(header);

            // Scrollable form area
            const scrollArea = document.createElement('div');
            scrollArea.style.cssText = `
              flex: 1;
              overflow-y: auto;
              padding: 24px;
              display: flex;
              flex-direction: column;
            `;

            formContainer = document.createElement('div');
            scrollArea.appendChild(formContainer);

            // Trust footer
            scrollArea.appendChild(createTrustFooter().getElement());

            card.appendChild(scrollArea);

            return { getElement: () => card };
          })()
        ]
      );

      mount(mainContainer, 'app');
      renderForm();
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', buildApp);
  </script>
</body>
</html>

